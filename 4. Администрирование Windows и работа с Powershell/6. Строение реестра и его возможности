# 6. Строение реестра и его возможности

## Практическая работа: пошаговое выполнение

### 1. Мониторинг обращений к реестру
1. Открыл "Блокнот" через:
   - Win+R → notepad → Enter
2. Запустил Process Monitor (ProcMon):
   - Открыл ProcMon.exe
   - В фильтрах (Filter → Filter) установил:
     - Process Name → is → notepad.exe → Include
     - Operation → RegOpenKey, RegQueryValue → Include
3. В блокноте:
   - Набрал текст "Test registry monitoring"
   - Файл → Сохранить как → test.txt → Сохранить
4. Для 7-Zip:
   - Изменил фильтр в ProcMon на 7z.exe
   - Запустил архивацию любого файла через 7-Zip

### 2. Логирование загрузки ОС
1. Настроил запись лога загрузки:
   - В ProcMon: Options → Enable Boot Logging
   - Перезагрузил систему
2. После загрузки:
   - Открыл ProcMon
   - Автоматически загрузил bootlog.pml
   - Применил фильтр: Operation → begins with → Reg
3. Зафиксировал количество записей в строке состояния (например: "Events: 12,456")

### 3. Работа с консолью восстановления
**Для Windows 7:**
1. Перезагрузил систему
2. Нажал F8 перед загрузкой Windows
3. Выбрал "Устранение неполадок компьютера"
4. Ввел пароль администратора
5. Выбрал "Командная строка"

**Для Windows 10:**
1. Зашел в Параметры → Обновление и безопасность → Восстановление
2. Нажал "Перезагрузить сейчас" в особых вариантах загрузки
3. Выбрал: Поиск и устранение неисправностей → Дополнительные параметры → Командная строка

### 4. Резервное копирование реестра
1. Полная резервная копия:
   - regedit → Файл → Экспорт
   - Выбрал "Весь реестр"
   - Сохранил как "FullBackup.reg"
2. Копия отдельных кустов:
   - Открыл regedit
   - Выделил HKLM → Файл → Экспорт → "HKLM_backup.reg"
   - Выделил HKCU → Файл → Экспорт → "HKCU_backup.reg"

### 5. Создание точки восстановления
1. Win+R → sysdm.cpl → Enter
2. Вкладка "Защита системы"
3. Нажал "Создать" → Ввел имя точки → Создать
4. Дождался сообщения "Точка восстановления создана успешно"

### 6. Восстановление реестра
1. Зашел в консоль восстановления (как в п.3)
2. Выполнил команды:
cd C:\Backups
regedit /s FullBackup.reg

3. Для отдельных кустов:
reg import HKLM_backup.reg
reg import HKCU_backup.re

### 7. Работа с reg.exe (дополнительно)
1. Экспорт ветки:
reg export HKLM\Software\Microsoft\Windows C:\backup\windows_key.reg

2. Импорт:
reg import C:\backup\windows_key.reg

3. Просмотр значения:
reg query HKCU\Software\Microsoft\Windows\CurrentVersion /v Run

## Выводы
В ходе работы освоены ключевые команды для работы с реестром:
- Практическое использование regedit и reg.exe
- Создание и применение резервных копий
- Анализ обращений к реестру через ProcMon
- Работа в среде восстановления
- Управление точками восстановления системы
