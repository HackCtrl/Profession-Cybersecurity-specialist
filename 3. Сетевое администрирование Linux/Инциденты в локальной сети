# Инциденты в локальной сети

## Введение
В рамках курса по сетевому администрированию Linux я изучил тему "Инциденты в локальной сети". Эта тема охватывает основные аспекты выявления и анализа инцидентов, происходящих внутри локальной сети, а также 
использование вспомогательных утилит для работы с логами и анализа сетевой активности.

---

## Основные концепции

### 1. Основные инциденты в локальной сети
- **Инциденты**: События, которые могут нарушить нормальную работу сети, такие как атаки, несанкционированный доступ, утечки данных и т.д.
- **Пример**: Попытки компрометации SSH-сервера, сканирование портов, атаки типа "человек посередине".

### 2. Выявление инцидентов внутри сети
- **Мониторинг**: Постоянное наблюдение за сетевым трафиком и логами для выявления подозрительной активности.
- **Пример**: Использование утилит для анализа логов, таких как `grep`, `awk`, `sort`, и `uniq`.

### 3. Выявление инцидентов за периметром сети
- **Анализ внешних угроз**: Выявление попыток атак извне, таких как сканирование портов, попытки подбора паролей и т.д.
- **Пример**: Анализ логов внешнего SSH-сервера для выявления попыток компрометации.

### 4. Вспомогательные утилиты для работы с логами
- **Утилиты**: `grep`, `wc`, `head`, `tail`, `awk`, `sort`, `uniq` — инструменты для анализа и фильтрации логов.
- **Пример**: Использование `grep` для поиска строк с определённым паттерном, например, "Invalid user".

---

## Практическая работа: Анализ логов внешнего SSH-сервера

### Цель практической работы
Освоить навыки анализа лог-файлов для выявления попыток компрометации внешнего SSH-сервера. Научиться определять частоту атак и идентифицировать IP-адреса атакующих.

### Задание 1. Попытки компрометации внешнего SSH-сервера

#### Что нужно сделать
1. Скопировать предоставленный лог-файл `auth.log` на Linux-сервер.
2. Провести анализ файла с помощью утилит `grep`, `wc`, `head`, и `tail`.
3. Определить количество попыток компрометации, дату и время первой и последней записи.
4. Вычислить среднее число атак в час.

#### Шаги выполнения

1. **Копирование лог-файла**:
    >> wget https://drive.google.com/file/d/1p20nfrsGeKhUcRD58muYGI-F5jGMvPzO/view?usp=sharing -O auth.log

### Анализ лог-файла:

### Определение числа строк с паттерном "Invalid user":
    >> grep "Invalid user" auth.log | wc -l

### Определение даты и времени первой записи:
    >> head -n 1 auth.log

### Определение даты и времени последней записи:
    >> tail -n 1 auth.log

### Задание 2. Определение IP-адреса атакующего

### Что нужно сделать
- Использовать утилиты grep, awk, sort, и uniq для получения списка IP-адресов и количества попыток атак.
- Зафиксировать команду, которая выводит данные в табличном виде.
- Определить IP-адрес, с которого было больше всего атак.

### Шаги выполнения

### Получение списка IP-адресов и количества попыток:
    >> grep "Invalid user" auth.log | awk '{print $NF}' | sort | uniq -c | sort -nr

### Фиксация команды и результатов:
    >> Записать команду и результаты в текстовый документ.
    >> Сделать скриншот таблицы с IP-адресами.

### Определение IP-адреса с наибольшим количеством атак:
    >> Зафиксировать IP-адрес, с которого было больше всего попыток.

### Вывод и обобщение

### Что было изучено:
- Навыки анализа лог-файлов для выявления инцидентов.
- Использование утилит для работы с логами.
- Определение частоты атак и идентификация IP-адресов атакующих.

### Что было сделано:
- Проведен анализ лог-файла auth.log.
- Определено количество попыток компрометации SSH-сервера.
- Вычислено среднее число атак в час.
- Определен IP-адрес с наибольшим количеством атак.

### Результаты:
- Успешно выполнены все шаги практической работы.
- Освоены навыки анализа логов и выявления инцидентов в локальной сети.

### Заключение
- В ходе изучения темы "Инциденты в локальной сети" я освоил ключевые аспекты анализа логов и выявления сетевых инцидентов. Практическая работа помогла закрепить знания по использованию утилит для анализа логов и 
определению источников атак. Эти навыки важны для обеспечения безопасности и мониторинга сетевой активности.
